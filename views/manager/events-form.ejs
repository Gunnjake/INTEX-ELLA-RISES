<%- include('../partials/header', { title: (eventData && eventData.id) ? 'Edit Event' : 'Add New Event', user: user || null }) %>

<div class="page-header">
    <h1><%= (eventData && eventData.id) ? 'Edit Event' : 'Add New Event' %></h1>
    <p><%= (eventData && eventData.id) ? 'Update event information' : 'Create a new event' %></p>
</div>

<div class="form-container">
    <form action="<%= (eventData && eventData.id) ? '/events/' + eventData.id + '/update' : '/events/new' %>" method="POST">
        <div class="form-group">
            <label for="event_name">Event Name *</label>
            <input type="text" id="event_name" name="event_name" value="<%= eventData ? (eventData.event_name || '') : '' %>" required>
        </div>
        <div class="form-group">
            <label for="event_type">Event Type *</label>
            <select id="event_type" name="event_type" required>
                <option value="">Select event type</option>
                <option value="workshop" <%= (eventData && eventData.event_type === 'workshop') ? 'selected' : '' %>>Workshop</option>
                <option value="summit" <%= (eventData && eventData.event_type === 'summit') ? 'selected' : '' %>>Summit</option>
                <option value="class" <%= (eventData && eventData.event_type === 'class') ? 'selected' : '' %>>Class</option>
                <option value="other" <%= (eventData && eventData.event_type === 'other') ? 'selected' : '' %>>Other</option>
            </select>
        </div>
        <div class="form-group">
            <label for="eventstart">Start Date/Time *</label>
            <input type="datetime-local" id="eventstart" name="eventstart" value="<%= eventData ? (eventData.eventstart || eventData.event_datetime_start || '') : '' %>" required>
        </div>
        <div class="form-group">
            <label for="eventend">End Date/Time *</label>
            <input type="datetime-local" id="eventend" name="eventend" value="<%= eventData ? (eventData.eventend || eventData.event_datetime_end || '') : '' %>" required>
        </div>
        <div class="form-group">
            <label for="location">Location *</label>
            <input type="text" id="location" name="location" value="<%= eventData ? (eventData.location || '') : '' %>" required>
        </div>
        <div class="form-group">
            <label for="eventcapacity">Capacity</label>
            <input type="number" id="eventcapacity" name="eventcapacity" min="0" value="<%= eventData ? (eventData.eventcapacity || eventData.capacity || '') : '' %>">
        </div>
        <div class="form-group">
            <label for="eventregistrationdeadline">Registration Deadline</label>
            <input type="datetime-local" id="eventregistrationdeadline" name="eventregistrationdeadline" value="<%= eventData ? (eventData.eventregistrationdeadline || eventData.registration_deadline || '') : '' %>">
        </div>
        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="4"><%= eventData ? (eventData.description || '') : '' %></textarea>
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save</button>
            <a href="/events" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<%- include('../partials/footer') %>



