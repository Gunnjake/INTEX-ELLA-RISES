<%- include('../partials/header', { title: (userData && userData.id) ? 'Edit User' : 'Add New User', user: user || null }) %>

<div class="page-header">
    <h1><%= (userData && userData.id) ? 'Edit User' : 'Add New User' %></h1>
    <p><%= (userData && userData.id) ? 'Update user information' : 'Create a new user account' %></p>
</div>

<div class="form-container">
    <form action="<%= (userData && userData.id) ? '/users/' + userData.id + '/update' : '/users/new' %>" method="POST">
        <div class="form-group">
            <label for="username">Username *</label>
            <input type="text" id="username" name="username" value="<%= userData ? (userData.username || '') : '' %>" required>
        </div>
        <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" value="<%= userData ? (userData.email || '') : '' %>" required>
        </div>
        <div class="form-group">
            <label for="password"><%= (userData && userData.id) ? 'New Password (leave blank to keep current)' : 'Password *' %></label>
            <input type="password" id="password" name="password" <%= (!userData || !userData.id) ? 'required' : '' %> maxlength="20">
        </div>
        <div class="form-group">
            <label for="role">Role *</label>
            <select id="role" name="role" required>
                <option value="">Select role</option>
                <option value="manager" <%= (userData && userData.role === 'manager') ? 'selected' : '' %>>Manager</option>
                <option value="user" <%= (userData && userData.role === 'user') ? 'selected' : '' %>>Common User</option>
            </select>
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save</button>
            <a href="/users" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<%- include('../partials/footer') %>



