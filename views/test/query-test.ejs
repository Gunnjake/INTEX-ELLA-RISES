<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<h2>Test Login Query</h2>

<form method="POST" action="/test-login-query" class="card p-4 mb-4" style="max-width: 500px;">
    <div class="mb-3">
        <label>Email</label>
        <input class="form-control" type="text" name="email" value="<%= testEmail %>" required>
    </div>
    <div class="mb-3">
        <label>Password</label>
        <input class="form-control" type="password" name="password" value="<%= testPassword %>" required>
    </div>
    <button class="btn btn-primary w-100">Run Login Query</button>
</form>

<script>
    <% if (queryError) { %>
        alert("ERROR:\n\n<%= queryError.replace(/"/g, '\\"') %>");
    <% } %>

    <% if (queryResult) { %>
        alert("Query Result:\n\n<%= queryResult.replace(/"/g, '\\"') %>");
    <% } %>

    <% if (loginError) { %>
        alert("Login Error:\n\n<%= loginError.replace(/"/g, '\\"') %>");
    <% } %>

    <% if (loginResult) { %>
        alert("Login Result:\n\n<%= JSON.stringify(loginResult, null, 2).replace(/"/g, '\\"') %>");
    <% } %>

    <% if (actualQuery) { %>
        alert("SQL Used:\n\n<%= actualQuery.replace(/"/g, '\\"') %>");
    <% } %>
</script>

</body>
</html>
